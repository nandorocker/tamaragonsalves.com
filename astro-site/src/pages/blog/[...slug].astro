---
import { getCollection } from 'astro:content';
import type { GetStaticPaths } from 'astro';
import BaseLayout from '../../layouts/BaseLayout.astro';

export const getStaticPaths: GetStaticPaths = async () => {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
};

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={entry.data.title} description={entry.data.description}>
  <div style="max-width: 800px; margin: 0 auto; padding: 2rem; font-family: system-ui, sans-serif; margin-top: 6rem;">
    <article>
      <header style="margin-bottom: 2rem; border-bottom: 1px solid #eee; padding-bottom: 1rem;">
        <h1 style="color: #333; margin-bottom: 0.5rem;">{entry.data.title}</h1>
        <div style="display: flex; gap: 1rem; align-items: center; color: #666; font-size: 0.9rem; flex-wrap: wrap;">
          <time datetime={entry.data.pubDate.toISOString()}>
            {entry.data.pubDate.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </time>
          <span>‚Ä¢</span>
          <span style="background: #f0f9ff; color: #0369a1; padding: 0.25rem 0.5rem; border-radius: 0.25rem; text-transform: capitalize;">
            {entry.data.category}
          </span>
          {entry.data.featured && (
            <>
              <span>‚Ä¢</span>
              <span style="background: #fef3c7; color: #92400e; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-weight: 500; font-size: 0.8rem;">
                ‚≠ê Featured
              </span>
            </>
          )}
          <span>‚Ä¢</span>
          <span>by Tamara Amoroso Gonsalves</span>
        </div>
        <div style="margin-top: 1rem;">
          {entry.data.tags.map(tag => (
            <span style="background: #fef3c7; color: #92400e; padding: 0.25rem 0.5rem; border-radius: 0.25rem; margin-right: 0.5rem; margin-bottom: 0.5rem; font-size: 0.8rem; display: inline-block;">
              #{tag}
            </span>
          ))}
        </div>
        {entry.data.externalUrl && (
          <div style="margin-top: 1rem;">
            <a href={entry.data.externalUrl} target="_blank" rel="noopener noreferrer" 
               style="color: #2563eb; text-decoration: none; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
              üìé View External Resource ‚Üí
            </a>
          </div>
        )}
      </header>
      
      <div style="line-height: 1.7; color: #374151;">
        <Content />
      </div>
      
      <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #eee;">
        <a href="/blog" style="color: #2563eb; text-decoration: none;">‚Üê Back to Blog</a>
      </footer>
    </article>
  </div>
</BaseLayout>