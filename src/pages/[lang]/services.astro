---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { loadAllTranslations, getTranslationSync, getStaticPaths } from '../../utils/i18n';
import type { Language } from '../../utils/i18n';

export { getStaticPaths };

const { lang } = Astro.params;
const currentLang = lang as Language;

// Load all translations (global + home page) for dynamic content
const allTranslations = await loadAllTranslations(currentLang, 'home');

// Helper function to get translation with fallback
const t = (key: string) => getTranslationSync(allTranslations, key);
---

<BaseLayout title={t('servicesHeading')} pageTheme="violet">
	<section id="services" class="services contain-margins-y bg-violet-50 dark:bg-gray-700 mt-20">
		<div class="contain-medium section-margins-medium">
			<h1 class="dark:text-pink-300" data-animate set:html={t('servicesHeading').replace(' ', ' <br class="sm:hidden"> ')}></h1>
			<div class="sm:grid sm:grid-cols-2 gap-x-10 lg:gap-x-16 lg:max-w-screen-lg mx-auto mb-12 list-none" data-stagger>
				<div>
					<div class="services-item pb-4" data-animate>
						<h3 class="dark:text-pink-300">{t('coursesTitle')}</h3>
						<ul class="bullet dark:text-gray-300">
							{getTranslationSync(allTranslations, 'coursesItems').map((item: string) => (
								<li><strong>{item.split(':')[0]}:</strong>{item.split(':')[1]}</li>
							))}
						</ul>
						<p class="text-small dark:text-gray-300">{t('coursesNote')}</p>
					</div>
					<div class="services-item pb-4" data-animate>
						<h3 class="dark:text-pink-300">{t('consultancyTitle')}</h3>
						<p class="dark:text-gray-300">{t('consultancyDescription')}</p>
						<ul class="bullet dark:text-gray-300">
							{getTranslationSync(allTranslations, 'consultancyItems').map((item: string) => (
								<li>{item}</li>
							))}
						</ul>
					</div>
				</div>

				<div>
					<div class="services-item pb-4" data-animate>
						<h3 class="dark:text-pink-300">{t('lawyeringTitle')}</h3>
						<ul class="bullet dark:text-gray-300">
							{getTranslationSync(allTranslations, 'lawyeringItems').map((item: string) => (
								<li>{item}</li>
							))}
						</ul>
					</div>
					<div class="services-item pb-4" data-animate>
						<h3 class="dark:text-pink-300">{t('mentorshipTitle')}</h3>
						<p class="dark:text-gray-300">{t('mentorshipDescription')}</p>
						<ul class="bullet dark:text-gray-300">
							{getTranslationSync(allTranslations, 'mentorshipItems').map((item: string) => (
								<li>{item}</li>
							))}
						</ul>
					</div>
					<div class="services-item pb-4" data-animate>
						<h3 class="dark:text-pink-300">{t('advocacyTitle')}</h3>
						<ul class="bullet dark:text-gray-300">
							{getTranslationSync(allTranslations, 'advocacyItems').map((item: string) => (
								<li>{item}</li>
							))}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>
</BaseLayout>
